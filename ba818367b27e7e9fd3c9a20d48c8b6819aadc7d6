{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "097c1843_afd71ddb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3864
      },
      "writtenOn": "2022-01-05T03:11:55Z",
      "side": 1,
      "message": "Hello,\n\nThis Change-Id: I654085cc1a3212eec603f5a1224cee0fdd1b45c6 is the tip of the patchset that is an alternate for CVE-2020-29374, instead of Change-Id: If6f9e1a80bd54bbee101aca3125582fa4b626459.\n\nTo reduce the complexity of the backport from aa.git mapcount_unshare branch, this is not handling THP and it will intentionally fail to build for safety in case somebody tries to enable THP in the kernel config. This shortcut was possible only because Android unfortunately don\u0027t seem to generally enable THP.\n\nChange-Id: If6f9e1a80bd54bbee101aca3125582fa4b626459 resolves the CVE by turning all read pins into write pins. This solution as opposed introduces a COR copy-on-read fault and it causes the read pin to invoke it by setting FOLL_UNSHARE whenever necessary according to the page exclusivity checked under page lock against mapcount+swapcount, so it remains transparent to the MM behavior (unlike Change-Id: If6f9e1a80bd54bbee101aca3125582fa4b626459) and it will not unnecessarily trigger copy-on-writes.\n\nThanks.",
      "revId": "ba818367b27e7e9fd3c9a20d48c8b6819aadc7d6",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ee338e6_67945686",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 10067
      },
      "writtenOn": "2022-01-05T12:12:09Z",
      "side": 1,
      "message": "is chain starting with revert merged upstream?",
      "revId": "ba818367b27e7e9fd3c9a20d48c8b6819aadc7d6",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "141c3243_1fd3e4f2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3864
      },
      "writtenOn": "2022-01-06T23:02:03Z",
      "side": 1,
      "message": "\u003e is chain starting with revert merged upstream?\n\nYes the first commit of the chain is the AOSP fix that is reverted in the second commit of this chain (it\u0027s also reverted upstream, but not reverted in AOSP common kernel) and then the alternative fix is applied after the revert commit.\n\nThe simplest fix is to apply the AOSP fix and stop there, but this full chain is my preferred solution since it has no side effects (even though the side effects should not bite the Android use cases).\n\nThanks!",
      "parentUuid": "0ee338e6_67945686",
      "revId": "ba818367b27e7e9fd3c9a20d48c8b6819aadc7d6",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e00a74b1_84cfa7eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 10067
      },
      "writtenOn": "2022-01-06T23:13:31Z",
      "side": 1,
      "message": "So alternative fix is in mainline?",
      "parentUuid": "141c3243_1fd3e4f2",
      "revId": "ba818367b27e7e9fd3c9a20d48c8b6819aadc7d6",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    }
  ]
}